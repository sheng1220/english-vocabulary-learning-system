# 英文單字學習系統 (完全改進版)

這是一個分為兩個獨立工具的英文單字學習系統，包含後台資料處理工具和前台考試系統。

## 🎯 最新重大改進

### ✅ 問題修復與功能優化

1. **📁 獨立資料檔案**
   - 新建 `vocabulary-data.js` 獨立檔案
   - 管理者只需編輯此檔案即可更新所有單字資料
   - 不再需要找第441行，直接編輯 JS 檔案

2. **🎵 自動播放系統**
   - **改進前**: 每個單字都要按播放按鈕
   - **改進後**: 自動依序播放所有單字
   - 提供暫停/恢復按鈕，不需要每題都手動操作

3. **🔄 導航控制**
   - 新增「上一題」和「下一題」按鈕
   - 考生可以回頭重聽或跳過
   - 按鈕智能禁用（第一題禁用上一題，最後一題禁用下一題）

4. **👁️ 持續顯示狀態**
   - **改進前**: 每個單字都要重新切換顯示/隱藏
   - **改進後**: 按一次「顯示單字」後，所有後續單字都會顯示
   - 再按一次「隱藏單字」，所有後續單字都會隱藏

5. **🔢 題數邏輯修復**
   - **問題**: 設定9題只給6題的bug
   - **修復**: 完全重寫隨機選題邏輯
   - **驗證**: 加入 console.log 確保題數準確

## 系統組成

### 工具1: 後台資料處理工具 (`tool1-data-processor.html`)
- **功能**: 處理上傳的 txt 單字檔案，調用 API 獲取發音、詞性等資訊
- **輸出**: 標準格式的 JSON 資料
- **改進**: 移除 Google Translate API，簡化流程

### 工具2: 前台考試系統 (`tool2-exam-system.html`)
- **功能**: 完整的自動播放英文聽寫考試系統
- **資料來源**: 外部 `vocabulary-data.js` 檔案
- **特色**: 自動播放、導航控制、持續狀態管理

### 新增檔案: 資料管理 (`vocabulary-data.js`)
- **用途**: 集中管理所有單字資料
- **好處**: 管理者直接編輯此檔案即可更新系統
- **格式**: 標準 JavaScript 物件格式

## 🎮 使用流程

### 管理者（設定階段）
1. 使用工具1處理txt檔案，生成JSON資料
2. 將JSON資料複製到 `vocabulary-data.js`
3. 部署系統到伺服器

### 使用者（考試階段）
1. 開啟工具2，選擇組別（按鈕式選擇）
2. 設定考試參數（題數、播放速度、發音類型）
3. 點擊「開始考試」
4. 系統自動播放，使用者可以：
   - 暫停/恢復播放
   - 上一題/下一題導航
   - 切換單字顯示/隱藏
5. 考試結束後查看完整答案

## 🔧 技術特色

### 自動播放系統
```javascript
// 自動播放邏輯
- 開始考試 → 自動播放第一題
- 播放完成 → 等待設定時間 → 自動下一題
- 支援暫停/恢復功能
- 支援手動導航（不中斷自動播放）
```

### 持續狀態管理
```javascript
// 狀態持續邏輯
isWordVisible = false  // 初始隱藏
使用者點擊「顯示單字」→ isWordVisible = true
→ 所有後續單字都會顯示，直到再次點擊
```

### 精確題數控制
```javascript
// 修復後的選題邏輯
for (let i = 0; i < actualQuestionCount; i++) {
    if (availableWords.length === 0) break;
    const randomIndex = Math.floor(Math.random() * availableWords.length);
    examWords.push(availableWords.splice(randomIndex, 1)[0]);
}
```

## 📊 介面改進

### 考試頁面佈局
```
📊 進度顯示 (第 X 題 / 共 X 題)
⏸️ 暫停/播放按鈕 + 狀態顯示
📝 單字顯示區域（可切換）
🎛️ 顯示/隱藏切換按鈕
⬅️ 上一題 | 下一題 ➡️ 導航按鈕
🔙 返回設定按鈕
```

### 狀態指示
- **自動播放中**: 綠色狀態，⏸️ 暫停按鈕
- **已暫停**: 黃色狀態，▶️ 播放按鈕  
- **已停止**: 灰色狀態，▶️ 播放按鈕

## 📁 檔案說明

- `vocabulary.txt`: 原始單字檔案（範例）
- `tool1-data-processor.html`: 後台資料處理工具
- `tool2-exam-system.html`: 前台考試系統（主要檔案）
- `vocabulary-data.js`: **單字資料檔案（管理者編輯此檔案）**
- `sample-vocabulary.json`: 測試用JSON檔案（參考格式）
- `README.md`: 使用說明文件

## 🎯 管理者操作指南

### 更新單字資料
1. 編輯 `vocabulary-data.js` 檔案
2. 修改 `vocabularyData.groups` 物件
3. 儲存檔案即可生效

### 資料格式
```javascript
const vocabularyData = {
    "groups": {
        "1-10": [
            {
                "id": 1,
                "word": "example",
                "us_audio": "https://...",
                "natural_audio": "https://...",
                "pos": "noun"
            }
        ]
    }
};
```

## 🚀 部署方式

### 檔案上傳
1. 上傳所有檔案到網路伺服器
2. 確保 `vocabulary-data.js` 與 `tool2-exam-system.html` 在同一目錄
3. 可將 `tool2-exam-system.html` 重新命名為 `index.html`

### GitHub Pages 部署
1. 建立 GitHub Repository
2. 上傳所有檔案
3. 在 Settings → Pages 中啟用 GitHub Pages
4. 系統即可透過提供的 URL 存取

## 🎪 測試確認

所有問題均已修復並測試：

1. ✅ **資料獨立**: `vocabulary-data.js` 可單獨編輯
2. ✅ **自動播放**: 開始後自動依序播放所有題目
3. ✅ **導航功能**: 上一題/下一題按鈕正常運作
4. ✅ **持續狀態**: 顯示/隱藏狀態在所有題目間保持
5. ✅ **題數正確**: 設定N題確實產生N題（已加入日誌驗證）

---

*更新時間: 2025年1月*  
*版本: v2.0 - 完全改進版*  
*主要改進: 自動播放、導航控制、持續狀態、資料分離、題數修復*